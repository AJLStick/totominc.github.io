function initVars(){money=1e3,totalMoney=money,tokens=0,tokensOn=0,tokensRate=1;for(var a=0;a<t1.length;a++)t1owned.push(0)}function initGame(){$("#s-money").html("Money : "+fix(money,2)+"$"),$("#s-totalMoney").html("Total money : "+fix(totalMoney,2)+"$"),$("#s-tokens").html("Tokens : "+fix(tokens,0)),$("#s-tokensRate").html("Tokens Rate : "+fix(tokensRate,1)+"%");for(var a=0;a<t1.length;a++){var b=t1[a];$("#t1-n"+(a+1)).html(b.name+" : "),$("#t1-r"+(a+1)).html(fix(getInc(a),2)+"$ "),$("#t1-o"+(a+1)).html("("+t1owned[a]+" owned)"),$("#t1-b"+(a+1)+"c1").html("x1 : "+fix(getPrice(a),2)+"$ - "),$("#t1-b"+(a+1)+"c1").attr("onclick","buyBuilding("+a+", 1)"),$("#t1-b"+(a+1)+"c2").html("x10 : "+fix(displayPrice(a,10),2)+"$"),$("#t1-b"+(a+1)+"c2").attr("onclick","buyBuilding("+a+", 10)")}}function getInc(a){return t1[a].reward}function getPrice(a){var b=t1[a];return b.price*Math.pow(b.inflation,t1owned[a])}function displayPrice(a,b){for(var c=b,d=t1[a],e=0,f=c+t1owned[a];f>t1owned[a];)c--,f=c+t1owned[a],e+=d.price*Math.pow(d.inflation,f);return console.log("final price : "+e),e}function updateBuilds(){for(var a=0;a<t1.length;a++){var b=t1[a];$("#t1-n"+(a+1)).html(b.name+" : "),$("#t1-r"+(a+1)).html(fix(getInc(a),2)+"$ "),$("#t1-o"+(a+1)).html("("+t1owned[a]+" owned)"),$("#t1-b"+(a+1)+"c1").html("x1 : "+fix(getPrice(a),2)+"$ - "),$("#t1-b"+(a+1)+"c2").html("x10 : "+fix(displayPrice(a,10),2)+"$")}$("#s-money").html("Money : "+fix(money,2)+"$")}function Building(a,b,c,d){this.name=a,this.price=b,this.reward=c,this.inflation=d}function buyBuilding(a,b){var c=b;if(c>0)for(var d=0;c>d;d++)buyBuildingOnce(a);else for(;money>=getPrice(a);)buyBuildingOnce(a);updateBuilds()}function buyBuildingOnce(a){money<getPrice(a)||(money-=getPrice(a),t1owned[a]++)}var money,totalMoney,tokens,tokensOn,tokensRate,t1=[new Building("Build 1",4,1,1.08),new Building("Build 2",70,60,1.16)],t1owned=[];window.onload=function(){initVars(),initGame()};